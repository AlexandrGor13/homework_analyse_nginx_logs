# Analyse nginx logs


### Описание
Скрипт считывает данные из файла с логами nginx и составляет отчёт по самым запрашиваемым адресам.

Стандартный конфиг находится в файле constants.py:
```
CONFIG = {
    "REPORT_SIZE": 25, # кол-во URL с наибольшим временем обработки
    "REPORT_DIR": "./reports/", # директория с отчётами
    "LOG_DIR": "./log/", # директория с логами
    "LOG_FILE_PATH": "./", # путь до файла с логами работы скрипта
}
```
Логи по умолчанию пишутся в файл logs.log, но если в конфиге не указан путь до файла с логами, то
логи пишутся в stdout.
При необходимости можно использовать кастомный конфиг.
Для этого нужно переопределить нужные переменные из основного конфига в файле custom_config.py.

### Технологии в проекте
	structlog 25.4.0

### Установка
1. Склонируйте проект
```
git clone https://github.com/AlexandrGor13/homework_analyse_nginx_logs.git
```

2. Запустите установку зависимостей и настройку pre-commit
```
make setup
```
3. Создание контейнера со скриптом
```
make up
```
4. Запустить контейнер
```
make up
```

### Запуск скрипта
Запуск скрипта со стандартным конфигом в файле constants.py
```
make analyze
```
Запуск скрипт с кастомным конфигом
```
make analyze ARGS="--config custom_config.py"
```

### Остальные команды
Вызов справки
```
make
make help
```
Остановка контейнера со скриптом
```
make down
```
Вход в систему контейнера
```
make bash
```
Просмотр информации о контейнере
```
make ps
```

### Запуск тестов
Для запуска тестов нужно выполнить команду
```
pytest -s tests.py
```
